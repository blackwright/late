{"version":3,"sources":["config/index.ts","utils/hooks.ts","serviceWorker.js","store/types.ts","store/reducer.ts","store/index.ts","components/Visualizer/Visualizations/LoadingVisualization/index.tsx","components/Visualizer/Visualizations/index.tsx","components/Visualizer/VisualizationSelector.tsx","components/Analyser/index.tsx","components/LoadingAudio/index.tsx","songs.ts","components/Controls/AudioControls/index.tsx","components/Controls/index.tsx","store/actions.ts","components/App/index.tsx","index.tsx","utils/index.ts"],"names":["__webpack_require__","d","__webpack_exports__","FFT_SIZE","DATA_SIZE","useStateRef","initialState","_useState","useState","_useState2","Object","_Users_jerry_git_late_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","state","setState","stateRef","useRef","useEffect","current","useDebouncedResize","fn","deps","debouncedFn","debounced","window","addEventListener","removeEventListener","Boolean","location","hostname","match","ActionConstants","currentVisualizationIndex","prevVisualizationIndex","store","createStore","arguments","length","undefined","type","GO_TO_NEXT_VISUALIZATION","objectSpread","GO_TO_PREV_VISUALIZATION","__REDUX_DEVTOOLS_EXTENSION__","LoadingVisualization","react_default","a","createElement","className","visualizations","component","React","lazy","e","then","bind","Promise","all","options","smoothing","styledVisualizations","map","vis","props","style","rest","objectWithoutProperties","web","div","assign","connect","currentIndex","prevIndex","_ref","data","lowPassData","visIndex","modulo","direction","useCallback","prev","translateXMultiplier","concat","transitions","useTransition","from","transform","enter","leave","initial","react","fallback","Visualizations_LoadingVisualization","_ref2","item","key","Visualization","Analyser","audioContext","audioSource","Uint8Array","slicedToArray","rawData","setRawData","_useState3","_useState4","setLowPassData","animationFrameIdRef","rawAnalyser","createAnalyser","fftSize","smoothingTimeConstant","destination","filter","createBiquadFilter","lowPassAnalyser","requestAnimationFrame","tick","rawDataContainer","getByteTimeDomainData","lowPassDataContainer","cancelAnimationFrame","disconnect","Visualizer_VisualizationSelector","LoadingAudio","_ref$isShown","isShown","classNames","show","songs","artist","title","path","AudioControls","onHover","onHoverStop","audioIndex","prevTrack","nextTrack","currentSong","id","onMouseEnter","onMouseLeave","toLocaleLowerCase","onTouchEnd","onMouseUp","index_es","icon","faStepBackward","size","faStepForward","dispatch","goToNextVisualization","goToPrevVisualization","isOverlayShown","setIsOverlayShown","isControlHovered","setIsControlHovered","timeoutRef","touchRef","onKeyDown","event","which","document","showOverlay","clearTimeout","setTimeout","togglePlay","resume","onTouchStart","preventDefault","timestamp","Date","now","x","touches","clientX","goToRepo","open","onMouseDown","nativeEvent","deltaX","changedTouches","Math","abs","onPrev","onNext","wantsToPlay","isPlaying","Fragment","components_LoadingAudio","onMouseMove","onClick","versionInfo","play","pause","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","points","Controls_AudioControls","App","setWantsToPlay","setIsPlaying","_useStateRef","_useStateRef2","setAudioContext","audioContextRef","_useState5","_useState6","setSource","_useStateRef3","_useStateRef4","setAudioIndex","audioRef","audioElement","nextAudioIndex","src","prevAudioIndex","currentTime","onAudioPlay","onAudioPause","onAudioError","console","error","initializeAudioContext","AudioContext","webkitAudioContext","createMediaElementSource","paused","ref","preload","crossOrigin","components_Analyser","components_Controls","ReactDOM","render","es","components_App","getElementById","navigator","serviceWorker","ready","registration","unregister","number1","number2","isInteger","number","randomNumberBetween","min","max","decimalPrecision","floor","random","randomFloat","Number","toPrecision","msToWait","isImmediate","timeoutId","_len","args","Array","_key","context","this","shouldCallNow","apply"],"mappings":"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","file":"static/js/main.355ed4ab.chunk.js","sourcesContent":["export const FFT_SIZE = 512;\nexport const DATA_SIZE = FFT_SIZE / 2;\n","import React, { useState, useEffect, useRef } from 'react';\nimport { debounced } from '../utils';\n\nexport function useStateRef<S>(\n  initialState: S | (() => S)\n): [S, React.Dispatch<React.SetStateAction<S>>, React.MutableRefObject<S>] {\n  const [state, setState] = useState(initialState);\n  const stateRef = useRef(state);\n\n  useEffect(() => {\n    stateRef.current = state;\n  }, [state]);\n\n  return [state, setState, stateRef];\n}\n\nexport function useDebouncedResize(\n  fn: React.EffectCallback,\n  deps?: React.DependencyList\n) {\n  useEffect(() => {\n    fn();\n    const debouncedFn = debounced(fn);\n\n    window.addEventListener('resize', debouncedFn);\n    return () => window.removeEventListener('resize', debouncedFn);\n  }, deps);\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","export type StoreState = {\n  currentVisualizationIndex: number;\n  prevVisualizationIndex: number;\n};\n\nexport enum ActionConstants {\n  BEGIN_VISUALIZATION_TRANSITION = 'BEGIN_VISUALIZATION_TRANSITION',\n  END_VISUALIZATION_TRANSITION = 'END_VISUALIZATION_TRANSITION',\n  GO_TO_PREV_VISUALIZATION = 'GO_TO_PREV_VISUALIZATION',\n  GO_TO_NEXT_VISUALIZATION = 'GO_TO_NEXT_VISUALIZATION'\n}\n\ninterface GoToNextVisualizationAction {\n  type: typeof ActionConstants.GO_TO_NEXT_VISUALIZATION;\n}\n\ninterface GoToPrevVisualizationAction {\n  type: typeof ActionConstants.GO_TO_PREV_VISUALIZATION;\n}\n\nexport type ActionUnionType =\n  | GoToNextVisualizationAction\n  | GoToPrevVisualizationAction;\n","import { StoreState, ActionConstants, ActionUnionType } from './types';\n\nconst initialState: StoreState = {\n  currentVisualizationIndex: 0,\n  prevVisualizationIndex: 0\n};\n\nexport default function reducer(\n  state = initialState,\n  action: ActionUnionType\n): StoreState {\n  switch (action.type) {\n    case ActionConstants.GO_TO_NEXT_VISUALIZATION:\n      return {\n        ...state,\n        currentVisualizationIndex: state.currentVisualizationIndex + 1,\n        prevVisualizationIndex: state.currentVisualizationIndex\n      };\n\n    case ActionConstants.GO_TO_PREV_VISUALIZATION:\n      return {\n        ...state,\n        currentVisualizationIndex: state.currentVisualizationIndex - 1,\n        prevVisualizationIndex: state.currentVisualizationIndex\n      };\n\n    default:\n      return state;\n  }\n}\n","import { createStore } from 'redux';\nimport reducer from './reducer';\n\nconst store = createStore(\n  reducer,\n  (window as any).__REDUX_DEVTOOLS_EXTENSION__ &&\n    (window as any).__REDUX_DEVTOOLS_EXTENSION__()\n);\n\nexport default store;\n","import React from 'react';\nimport './LoadingVisualization.scss';\n\nconst LoadingVisualization: React.FC = () => (\n  <div className=\"loading-visualization\">\n    <div className=\"ring\">\n      <div />\n      <div />\n      <div />\n      <div />\n    </div>\n  </div>\n);\n\nexport default LoadingVisualization;\n","import React from 'react';\nimport Drummer from './Drummer';\nimport Halpern from './Halpern';\nimport Stars from './Stars';\nimport Rain from './Rain';\nimport { Props } from './VisualizationHOC';\n\nexport type QualitySettings = {\n  [quality: number]: { [setting: string]: any };\n};\n\nexport type Options = {\n  smoothing?: number;\n};\n\nexport type SelectableVisualization = {\n  component: React.ComponentType<Props>;\n  options?: Options;\n};\n\nconst visualizations: SelectableVisualization[] = [\n  {\n    component: React.lazy(() => import('./Rain'))\n  },\n  {\n    component: React.lazy(() => import('./Stars')),\n    options: { smoothing: 128 }\n  },\n  {\n    component: React.lazy(() => import('./Waveform'))\n  },\n  {\n    component: React.lazy(() => import('./Drummer')),\n    options: { smoothing: 64 }\n  },\n  {\n    component: React.lazy(() => import('./Halpern'))\n  }\n];\n\nexport default visualizations;\n","import React, { Suspense, useCallback } from 'react';\nimport { connect } from 'react-redux';\nimport { useTransition, animated } from 'react-spring';\nimport * as VisualizationHOC from './Visualizations/VisualizationHOC';\nimport LoadingVisualization from './Visualizations/LoadingVisualization';\nimport visualizations from './Visualizations';\nimport { modulo } from '../../utils';\nimport { StoreState } from '../../../src/store/types';\n\ntype Props = Pick<VisualizationHOC.Props, 'data' | 'lowPassData'>;\n\ntype StyledProps = Props & {\n  style: React.CSSProperties;\n};\n\nconst mapStateToProps = (state: StoreState) => ({\n  currentIndex: state.currentVisualizationIndex,\n  prevIndex: state.prevVisualizationIndex\n});\n\nconst styledVisualizations = visualizations.map(vis => {\n  return (props: StyledProps) => {\n    const { style, ...rest } = props;\n\n    return (\n      <animated.div className=\"visualization\" style={props.style}>\n        <vis.component {...rest} options={vis.options} />\n      </animated.div>\n    );\n  };\n});\n\nconst VisualizationSelector: React.FC<\n  Props & ReturnType<typeof mapStateToProps>\n> = ({ data, lowPassData, prevIndex, currentIndex }) => {\n  const visIndex = modulo(currentIndex, visualizations.length);\n\n  const direction = useCallback((current?, prev?) => {\n    let translateXMultiplier = 0;\n\n    if (current < prev) {\n      translateXMultiplier = 1;\n    } else if (prev < current) {\n      translateXMultiplier = -1;\n    }\n\n    return `translate3d(${100 * translateXMultiplier}%, 0, 0)`;\n  }, []);\n\n  const transitions = useTransition(visIndex, null, {\n    from: { transform: direction(currentIndex, prevIndex) },\n    enter: { transform: direction() },\n    leave: { transform: direction(prevIndex, currentIndex) },\n    initial: { transform: direction(0, -1) }\n  });\n\n  return (\n    <Suspense fallback={<LoadingVisualization />}>\n      {transitions.map(({ item, props, key }) => {\n        const Visualization = styledVisualizations[item];\n        return (\n          <Visualization\n            key={key}\n            data={data}\n            lowPassData={lowPassData}\n            style={props}\n          />\n        );\n      })}\n    </Suspense>\n  );\n};\n\nexport default connect(mapStateToProps)(VisualizationSelector);\n","import React, { useState, useEffect, useRef } from 'react';\nimport VisualizationSelector from '../Visualizer/VisualizationSelector';\nimport { FFT_SIZE } from '../../config';\n\ntype Props = {\n  audioContext?: AudioContext;\n  audioSource?: MediaElementAudioSourceNode;\n};\n\nconst Analyser: React.FC<Props> = ({ audioContext, audioSource }) => {\n  const [rawData, setRawData] = useState(new Uint8Array());\n  const [lowPassData, setLowPassData] = useState(new Uint8Array());\n\n  const animationFrameIdRef = useRef<number>();\n\n  useEffect(() => {\n    if (audioContext == null || audioSource == null) {\n      return;\n    }\n\n    const rawAnalyser = audioContext.createAnalyser();\n    rawAnalyser.fftSize = FFT_SIZE;\n    rawAnalyser.smoothingTimeConstant = 0;\n    audioSource.connect(rawAnalyser);\n    rawAnalyser.connect(audioContext.destination);\n\n    const filter = audioContext.createBiquadFilter();\n    filter.type = 'lowpass';\n    const lowPassAnalyser = audioContext.createAnalyser();\n    lowPassAnalyser.fftSize = FFT_SIZE;\n    lowPassAnalyser.smoothingTimeConstant = 0;\n    audioSource.connect(filter);\n    filter.connect(lowPassAnalyser);\n\n    const tick = () => {\n      const rawDataContainer = new Uint8Array(FFT_SIZE);\n      rawAnalyser.getByteTimeDomainData(rawDataContainer);\n      setRawData(rawDataContainer);\n\n      const lowPassDataContainer = new Uint8Array(FFT_SIZE);\n      lowPassAnalyser.getByteTimeDomainData(lowPassDataContainer);\n      setLowPassData(lowPassDataContainer);\n\n      animationFrameIdRef.current = window.requestAnimationFrame(tick);\n    };\n\n    animationFrameIdRef.current = window.requestAnimationFrame(tick);\n\n    return () => {\n      animationFrameIdRef.current != null &&\n        window.cancelAnimationFrame(animationFrameIdRef.current);\n      rawAnalyser && rawAnalyser.disconnect();\n      lowPassAnalyser && lowPassAnalyser.disconnect();\n      audioSource && audioSource.disconnect();\n    };\n  }, [audioContext, audioSource]);\n\n  return <VisualizationSelector data={rawData} lowPassData={lowPassData} />;\n};\n\nexport default Analyser;\n","import React from 'react';\nimport classNames from 'classnames';\nimport './LoadingAudio.scss';\n\ntype Props = {\n  isShown?: boolean;\n};\n\nconst LoadingAudio: React.FC<Props> = ({ isShown = true }) => (\n  <div className={classNames('loading-audio', { show: isShown })}>\n    <span className=\"loading-dot\" />\n    <span className=\"loading-dot\" />\n    <span className=\"loading-dot\" />\n  </div>\n);\n\nexport default LoadingAudio;\n","type Song = {\n  artist: string;\n  title: string;\n  path: string;\n};\n\nexport const songs: Song[] = [\n  {\n    artist: 'Nujabes',\n    title: 'Aruarian Dance',\n    path: 'https://blackwright-late.s3.amazonaws.com/nujabes-aruarian-dance.mp3'\n  },\n  {\n    artist: 'BØJET',\n    title: 'Lost',\n    path: 'https://blackwright-late.s3.amazonaws.com/b%C3%B8jet-lost.mp3'\n  },\n  {\n    artist: 'Kudasai',\n    title: 'Dream of Her',\n    path: 'https://blackwright-late.s3.amazonaws.com/kudasai-dream-of-her.mp3'\n  },\n  {\n    artist: 'Wys',\n    title: 'Close My Eyes',\n    path: 'https://blackwright-late.s3.amazonaws.com/wys-close-my-eyes.mp3'\n  },\n  {\n    artist: 'Sky.High',\n    title: `Cold Days (feat. j'san)`,\n    path:\n      'https://blackwright-late.s3.amazonaws.com/sky.high-cold-days-feat-jsan.mp3'\n  },\n  {\n    artist: 'Kudasai',\n    title: `The Girl I Haven't Met`,\n    path: 'https://blackwright-late.s3.amazonaws.com/kudasai-the-girl.mp3'\n  },\n  {\n    artist: 'Fujitsu',\n    title: 'Awaiting',\n    path: 'https://blackwright-late.s3.amazonaws.com/fujitsu-awaiting.mp3'\n  },\n  {\n    artist: 'Nymano',\n    title: 'For You',\n    path: 'https://blackwright-late.s3.amazonaws.com/nymano-for-you.mp3'\n  },\n  {\n    artist: 'Kudasai',\n    title: 'Technicolor',\n    path: 'https://blackwright-late.s3.amazonaws.com/kudasai-technicolor.mp3'\n  },\n  {\n    artist: 'Juan Rios',\n    title: 'Noche',\n    path: 'https://blackwright-late.s3.amazonaws.com/juan-rios-noche.mp3'\n  },\n  {\n    artist: 'Philanthrope',\n    title: 'Carwash',\n    path: 'https://blackwright-late.s3.amazonaws.com/philanthrope-carwash.mp3'\n  },\n  {\n    artist: 'agxxd1ne',\n    title: 'Sunday Morning',\n    path:\n      'https://blackwright-late.s3.amazonaws.com/agxxd1ne-sunday-morning.mp3'\n  },\n  {\n    artist: 'Flamingosis',\n    title: 'Football Head',\n    path:\n      'https://blackwright-late.s3.amazonaws.com/flamingosis-football-head.mp3'\n  },\n  {\n    artist: 'Nujabes',\n    title: 'Counting Stars',\n    path: 'https://blackwright-late.s3.amazonaws.com/nujabes-counting-stars.mp3'\n  }\n];\n","import React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faStepBackward,\n  faStepForward\n} from '@fortawesome/free-solid-svg-icons';\nimport './AudioControls.scss';\nimport { songs } from '../../../songs';\n\ntype Props = {\n  onHover: () => void;\n  onHoverStop: () => void;\n  audioIndex: number;\n  prevTrack: () => void;\n  nextTrack: () => void;\n};\n\nconst AudioControls: React.FC<Props> = ({\n  onHover,\n  onHoverStop,\n  audioIndex,\n  prevTrack,\n  nextTrack\n}) => {\n  const currentSong = songs[audioIndex];\n\n  return (\n    <div id=\"audio-controls\" onMouseEnter={onHover} onMouseLeave={onHoverStop}>\n      {currentSong.artist.toLocaleLowerCase()}\n      {' - '}\n      {currentSong.title.toLocaleLowerCase()}\n      <div id=\"track-controls\">\n        <button onTouchEnd={prevTrack} onMouseUp={prevTrack}>\n          <FontAwesomeIcon icon={faStepBackward} size=\"xs\" />\n        </button>\n        <button onTouchEnd={nextTrack} onMouseUp={nextTrack}>\n          <FontAwesomeIcon icon={faStepForward} size=\"xs\" />\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default AudioControls;\n","import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { Dispatch } from 'redux';\nimport { connect } from 'react-redux';\nimport classNames from 'classnames';\nimport LoadingAudio from '../LoadingAudio';\nimport * as Actions from '../../store/actions';\nimport * as versionInfo from '../../metadata/build-version.json';\nimport AudioControls from './AudioControls';\nimport './Controls.scss';\n\nconst CONTROLS_FADE_OUT_DELAY = 3000;\nconst TOUCH_WAS_CLICK_THRESHOLD = 250;\nconst TOUCH_WAS_SWIPE_THRESHOLD = 350;\n\ntype Props = {\n  audioContext?: AudioContext;\n  wantsToPlay: boolean;\n  isPlaying: boolean;\n  togglePlay: () => void;\n  audioIndex: number;\n  prevTrack: () => void;\n  nextTrack: () => void;\n} & ReturnType<typeof mapDispatchToProps>;\n\ntype Touch = {\n  timestamp: number;\n  x: number;\n};\n\nconst Controls: React.FC<Props> = props => {\n  const [isOverlayShown, setIsOverlayShown] = useState(true);\n  const [isControlHovered, setIsControlHovered] = useState(false);\n\n  const timeoutRef = useRef<number>();\n  const touchRef = useRef<Touch>();\n\n  useEffect(() => {\n    const onKeyDown = (event: KeyboardEvent) => {\n      switch (event.which) {\n        case 37:\n        case 38: {\n          props.goToPrevVisualization();\n          break;\n        }\n        case 39:\n        case 40: {\n          props.goToNextVisualization();\n          break;\n        }\n      }\n    };\n\n    document.addEventListener('keydown', onKeyDown);\n    return () => document.removeEventListener('keydown', onKeyDown);\n  }, []);\n\n  const showOverlay = useCallback(() => {\n    timeoutRef.current != null && window.clearTimeout(timeoutRef.current);\n\n    setIsOverlayShown(true);\n    timeoutRef.current = window.setTimeout(() => {\n      if (!isControlHovered) {\n        setIsOverlayShown(false);\n      }\n    }, CONTROLS_FADE_OUT_DELAY);\n  }, [isControlHovered]);\n\n  const togglePlay = useCallback(() => {\n    props.audioContext && props.audioContext.resume();\n    props.togglePlay();\n    showOverlay();\n  }, [props.audioContext, props.togglePlay]);\n\n  const onTouchStart = useCallback((event: React.TouchEvent) => {\n    event.preventDefault();\n    touchRef.current = { timestamp: Date.now(), x: event.touches[0].clientX };\n  }, []);\n\n  const goToRepo = () => window.open('https://github.com/blackwright/late');\n\n  const onMouseDown = useCallback((event: React.MouseEvent) => {\n    if (event.nativeEvent.which === 1) {\n      touchRef.current = { timestamp: Date.now(), x: event.clientX };\n    }\n  }, []);\n\n  const onMouseUp = useCallback((event: React.MouseEvent) => {\n    if (\n      event.nativeEvent.which === 1 &&\n      touchRef.current &&\n      Date.now() - touchRef.current.timestamp < TOUCH_WAS_CLICK_THRESHOLD\n    ) {\n      togglePlay();\n    }\n  }, []);\n\n  const onTouchEnd = useCallback(\n    (event: React.TouchEvent) => {\n      event.preventDefault();\n      if (\n        touchRef.current &&\n        Date.now() - touchRef.current.timestamp < TOUCH_WAS_CLICK_THRESHOLD\n      ) {\n        showOverlay();\n      }\n\n      if (\n        touchRef.current &&\n        Date.now() - touchRef.current.timestamp < TOUCH_WAS_SWIPE_THRESHOLD\n      ) {\n        const deltaX = event.changedTouches[0].clientX - touchRef.current.x;\n        if (Math.abs(deltaX) > 50) {\n          if (deltaX < 0) {\n            props.goToPrevVisualization();\n          } else {\n            props.goToNextVisualization();\n          }\n        }\n      }\n    },\n    [isControlHovered]\n  );\n\n  const onPrev = useCallback(\n    (event: React.MouseEvent | React.TouchEvent) => {\n      event.preventDefault();\n      props.goToPrevVisualization();\n      showOverlay();\n    },\n    [isControlHovered]\n  );\n\n  const onNext = useCallback(\n    (event: React.MouseEvent | React.TouchEvent) => {\n      event.preventDefault();\n      props.goToNextVisualization();\n      showOverlay();\n    },\n    [isControlHovered]\n  );\n\n  const onHover = useCallback(() => setIsControlHovered(true), []);\n\n  const onHoverStop = useCallback(() => setIsControlHovered(false), []);\n\n  const { wantsToPlay, isPlaying, audioIndex, prevTrack, nextTrack } = props;\n\n  return (\n    <>\n      {wantsToPlay && !isPlaying && <LoadingAudio />}\n      <div\n        id=\"overlay\"\n        onTouchStart={onTouchStart}\n        onTouchEnd={onTouchEnd}\n        onMouseMove={showOverlay}\n        className={classNames({ show: isOverlayShown })}\n      >\n        <h1\n          id=\"title\"\n          onClick={goToRepo}\n          onTouchEnd={goToRepo}\n          onMouseEnter={onHover}\n          onMouseLeave={onHoverStop}\n        >\n          late\n        </h1>\n        <div id=\"version\">build {versionInfo.version}</div>\n        <div\n          id=\"play-pause-container\"\n          onMouseDown={onMouseDown}\n          onMouseUp={onMouseUp}\n          onTouchEnd={togglePlay}\n          onMouseEnter={onHover}\n          onMouseLeave={onHoverStop}\n        >\n          <div\n            className={classNames({\n              play: !wantsToPlay && !isPlaying,\n              pause: wantsToPlay && isPlaying\n            })}\n          />\n        </div>\n        <div className=\"navigation\">\n          <div\n            className=\"arrow-container\"\n            onTouchEnd={onPrev}\n            onMouseUp={onPrev}\n            onMouseEnter={onHover}\n            onMouseLeave={onHoverStop}\n          >\n            <svg\n              className=\"arrow\"\n              width=\"60px\"\n              height=\"80px\"\n              viewBox=\"0 0 50 80\"\n            >\n              <polyline\n                fill=\"none\"\n                stroke=\"#FFF\"\n                strokeWidth=\"3\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                points=\"45.63,75.8 0.375,38.087 45.63,0.375\"\n              />\n            </svg>\n          </div>\n          <div\n            className=\"arrow-container\"\n            onTouchEnd={onNext}\n            onMouseUp={onNext}\n            onMouseEnter={onHover}\n            onMouseLeave={onHoverStop}\n          >\n            <svg\n              className=\"arrow\"\n              width=\"60px\"\n              height=\"80px\"\n              viewBox=\"0 0 50 80\"\n            >\n              <polyline\n                fill=\"none\"\n                stroke=\"#FFF\"\n                strokeWidth=\"3\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                points=\"0.375,0.375 45.63,38.087 0.375,75.8\"\n              />\n            </svg>\n          </div>\n        </div>\n        <AudioControls\n          onHover={onHover}\n          onHoverStop={onHoverStop}\n          audioIndex={audioIndex}\n          prevTrack={prevTrack}\n          nextTrack={nextTrack}\n        />\n      </div>\n    </>\n  );\n};\n\nconst mapDispatchToProps = (dispatch: Dispatch) => ({\n  goToNextVisualization: () => dispatch(Actions.goToNextVisualization()),\n  goToPrevVisualization: () => dispatch(Actions.goToPrevVisualization())\n});\n\nexport default connect(\n  null,\n  mapDispatchToProps\n)(Controls);\n","import { ActionConstants, ActionUnionType } from './types';\n\nexport const goToNextVisualization = (): ActionUnionType => ({\n  type: ActionConstants.GO_TO_NEXT_VISUALIZATION\n});\n\nexport const goToPrevVisualization = (): ActionUnionType => ({\n  type: ActionConstants.GO_TO_PREV_VISUALIZATION\n});\n","import React, { useState, useRef, useEffect, useCallback } from 'react';\nimport Analyser from '../Analyser';\nimport Controls from '../Controls';\nimport { useStateRef } from '../../utils/hooks';\nimport { modulo } from '../../utils';\nimport { songs } from '../../songs';\n\nconst App: React.FC = () => {\n  const [wantsToPlay, setWantsToPlay] = useState(false);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [audioContext, setAudioContext, audioContextRef] = useStateRef<\n    AudioContext | undefined\n  >(undefined);\n  const [audioSource, setSource] = useState<MediaElementAudioSourceNode>();\n  const [audioIndex, setAudioIndex, audioIndexRef] = useStateRef(0);\n\n  const audioRef = useRef<HTMLAudioElement>(null);\n\n  const nextTrack = useCallback(() => {\n    const audioElement = audioRef.current!;\n    const nextAudioIndex = modulo(audioIndex + 1, songs.length);\n    audioElement.src = songs[nextAudioIndex].path;\n    audioElement.play();\n    setAudioIndex(nextAudioIndex);\n  }, [audioIndex, audioRef.current]);\n\n  const prevTrack = useCallback(() => {\n    const audioElement = audioRef.current!;\n    // play track from beginning if enough time has elapsed,\n    // instead of changing to previous track\n    const shouldStayOnThisTrack = audioElement.currentTime > 5;\n    const prevAudioIndex = shouldStayOnThisTrack\n      ? audioIndex\n      : modulo(audioIndex - 1, songs.length);\n    audioElement.src = songs[prevAudioIndex].path;\n    audioElement.play();\n    setAudioIndex(prevAudioIndex);\n  }, [audioIndex, audioRef.current]);\n\n  // attach audio event listeners\n  useEffect(() => {\n    const audioElement = audioRef.current!;\n\n    const onAudioPlay = () => setIsPlaying(true);\n    const onAudioPause = () => setIsPlaying(false);\n    const onAudioError = console.error;\n\n    audioElement.addEventListener('playing', onAudioPlay);\n    audioElement.addEventListener('pause', onAudioPause);\n    audioElement.addEventListener('error', onAudioError);\n\n    return () => {\n      audioElement.removeEventListener('playing', onAudioPlay);\n      audioElement.removeEventListener('pause', onAudioPause);\n      audioElement.removeEventListener('error', onAudioError);\n    };\n  }, []);\n\n  // next track listener on track end\n  useEffect(() => {\n    const audioElement = audioRef.current!;\n\n    audioElement.addEventListener('ended', nextTrack);\n    return () => audioElement.removeEventListener('ended', nextTrack);\n  }, [audioIndex, audioRef.current]);\n\n  const initializeAudioContext = useCallback(() => {\n    const audioElement = audioRef.current!;\n    const audioContext = new (window.AudioContext ||\n      (window as any).webkitAudioContext)();\n    const audioSource = audioContext.createMediaElementSource(audioElement);\n\n    setAudioContext(audioContext);\n    setSource(audioSource);\n  }, [audioRef.current]);\n\n  const togglePlay = useCallback(() => {\n    const audioElement = audioRef.current!;\n\n    if (audioElement.paused) {\n      setWantsToPlay(true);\n      audioElement.play();\n\n      if (!audioContextRef.current) {\n        initializeAudioContext();\n      }\n    } else {\n      setWantsToPlay(false);\n      audioElement.pause();\n    }\n  }, [audioRef.current]);\n\n  return (\n    <>\n      <audio\n        ref={audioRef}\n        id=\"audioElement\"\n        src={songs[0].path}\n        preload=\"auto\"\n        crossOrigin=\"anonymous\"\n      />\n\n      <Analyser audioContext={audioContext} audioSource={audioSource} />\n\n      <Controls\n        audioContext={audioContext}\n        wantsToPlay={wantsToPlay}\n        isPlaying={isPlaying}\n        togglePlay={togglePlay}\n        audioIndex={audioIndex}\n        prevTrack={prevTrack}\n        nextTrack={nextTrack}\n      />\n    </>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport * as serviceWorker from './serviceWorker';\nimport store from './store';\nimport App from './components/App';\nimport './reset.scss';\nimport './index.scss';\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","export function modulo(number1: number, number2: number): number {\n  return ((number1 % number2) + number2) % number2;\n}\n\nexport function isMobileDevice(): boolean {\n  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n    navigator.userAgent\n  );\n}\n\nfunction isInteger(number: number) {\n  return modulo(number, 1) === 0;\n}\n\nexport function randomNumberBetween(\n  min: number,\n  max: number,\n  decimalPrecision = 1\n) {\n  if (isInteger(min) && isInteger(max)) {\n    return min + Math.floor(Math.random() * (max - min));\n  }\n\n  const randomFloat = min + Math.random() * (max - min);\n  return Number(randomFloat.toPrecision(decimalPrecision));\n}\n\nexport function debounced(\n  fn: (...args: any[]) => any,\n  msToWait: number = 500,\n  isImmediate: boolean = false\n) {\n  let timeoutId: number | null = null;\n\n  return function(this: any, ...args: any[]): any {\n    const context = this;\n\n    const delayedFunction = function() {\n      timeoutId = null;\n\n      if (!isImmediate) {\n        fn.apply(context, args);\n      }\n    };\n\n    const shouldCallNow = isImmediate && timeoutId == null;\n\n    if (timeoutId != null) {\n      window.clearTimeout(timeoutId);\n    }\n\n    timeoutId = window.setTimeout(delayedFunction, msToWait);\n\n    if (shouldCallNow) {\n      fn.apply(context, args);\n    }\n  };\n}\n"],"sourceRoot":""}