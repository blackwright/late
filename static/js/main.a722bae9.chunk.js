(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,n){e.exports=n(42)},25:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(8),r=n.n(o);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=n(2),c=n(3),u=n(5),l=n(4),d=n(6),m=n(9),h=n.n(m),v=(n(25),function(e){var t=e.show;return i.a.createElement("div",{className:h()("loading",{show:t})},i.a.createElement("span",{className:"loading-dot"}),i.a.createElement("span",{className:"loading-dot"}),i.a.createElement("span",{className:"loading-dot"}))}),f=n(10);n(35);function w(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=t=function(t){function n(){var e,t;Object(s.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(t=Object(u.a)(this,(e=Object(l.a)(n)).call.apply(e,[this].concat(i)))).state={delayedAfterReflow:!1},t}return Object(d.a)(n,t),Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;window.setTimeout(function(){e.setState({delayedAfterReflow:!0})},0)}},{key:"render",value:function(){var t=this.props,n=t.data,o=t.timeout,r=t.isTransitioning,s=this.state.delayedAfterReflow,c=a.smoothing?function(e,t){return e.map(function(n,a){for(var i=[],o=a-t;o<a+t;){var r=e[o]||128;i.push(r),o+=1}return function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t/e.length}(i)})}(n,a.smoothing):n;return s&&i.a.createElement(e,{data:c,style:{transition:"transform ".concat(o,"ms linear")},isTransitioning:r})}}]),n}(i.a.Component),t.defaultProps={data:new Uint8Array,timeout:W,isTransitioning:!1},n}var p=n(19),y=[["#0E9AA7","#F6CD61","#FE8A71"],["#EE4540","#801336","#2D142C"],["#8FB9A8","#FDFBD4","#FCD0BA"],["#AC6D83","#685D79","#465C7A"],["#F36E38","#EF4648","#582841"],["#F1F1F1","#9BD7D1","#305D7A"],["#DEA5B6","#F3CD8C","#F2E9C2"],["#E27B47","#EFCA58","#46B29E"],["#2E7345","#2E9975","#2DB3B3"],["#52A3CC","#7EA1E5","#AAAAF2"],["#CC5285","#CC5285","#F2BCAA"],["#D8E0BB","#B6CEC7","#86A3C3"]];y.map(function(e,t){return{id:t,colorTriple:e}});function g(){return y[Math.floor(Math.random()*y.length)]}function E(){return function(e,t){for(var n=[];n.length<e;){var a=g(),i=a[Math.floor(Math.random()*a.length)];if(t&&n.includes(i))break;n.push(i)}return n}(1)[0]}n(36);var A=10,b=0,x=5,C=w(function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(o)))).ref=i.a.createRef(),n.canvas=void 0,n.ctx=void 0,n.intervalId=void 0,n.resizeTimeoutId=void 0,n.onResize=function(){window.clearTimeout(n.resizeTimeoutId);var e=n.canvas;n.resizeTimeoutId=window.setTimeout(function(){e.width=window.innerWidth,e.height=window.innerHeight},500)},n.paint=function(){var e=n.props.data,t=n.canvas,a=n.ctx,i=function(){var e=Object(p.a)(g());return Math.random()<=.5?e.reverse():e}();a.lineWidth=A,a.lineCap="round";var o=t.width/e.length;i.forEach(function(n,r){a.strokeStyle=n,a.beginPath();var s=r*b;a.moveTo(s,t.height/2),e.forEach(function(e){var n=e/255*t.height-x*i.length/2;a.lineTo(s,n+r*(x*i.length/2)),s+=o}),a.lineTo(s,t.height/2),a.stroke()})},n.fadeOut=function(){var e=n.ctx,t=n.canvas;e.fillStyle="rgba(0, 0, 0, 0.1)",e.fillRect(0,0,t.width,t.height)},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.onResize),this.canvas=this.ref.current,this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.ctx=this.canvas.getContext("2d"),this.ctx.fillStyle="#050505",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.intervalId=window.setInterval(this.fadeOut,7)}},{key:"componentDidUpdate",value:function(){this.paint()}},{key:"componentWillUnmount",value:function(){window.clearInterval(this.intervalId),window.removeEventListener("resize",this.onResize)}},{key:"render",value:function(){var e=this.props.style;return i.a.createElement("div",{className:"visualization waveform",style:e},i.a.createElement("div",{className:"backdrop"}),i.a.createElement("canvas",{ref:this.ref}),";")}}]),t}(i.a.Component),{smoothing:100}),D=n(18),k=(n(37),w(function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={size:0},n.color=E(),n.lastColorChangeTimestamp=Date.now(),n.onResize=function(){var e=window,t=e.innerWidth,a=e.innerHeight,i=Math.max(t,a);n.setState({size:2*i})},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.onResize),this.onResize()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"render",value:function(){for(var e=this.props,t=e.data,n=e.isTransitioning,a=this.state.size,o={},r=0;r<13;)o[r]=0,r+=1;t.forEach(function(e){for(var t=0;t<13;){var n=256/13*(t+1);if(Math.abs(e-128)>10&&e<=n){o[t]+=1;break}t+=1}});var s=Object.values(o).reduce(function(e,t){return t>40?e+1:e},0),c=Date.now();if(!n&&s/13>.3&&c-this.lastColorChangeTimestamp>200){var u;do{u=E()}while(this.color===u);this.color=u,this.lastColorChangeTimestamp=c}var l=Object.entries(o).map(function(e,t){var n=Object(D.a)(e,2),o=n[0],r=n[1],s=(+o+1)*a/13;return i.a.createElement("div",{key:o,className:"drummer-container",style:{width:"".concat(s,"px"),height:"".concat(s,"px"),opacity:(13-t)/13*.5*.25}},i.a.createElement("div",{className:h()("beat",{hit:r>40})}))});return i.a.createElement("div",{className:"visualization drummer",style:this.props.style},l,i.a.createElement("div",{className:"overlay",style:{backgroundColor:this.color}}))}}]),t}(i.a.Component),{smoothing:200})),T=n(1),O=new T.c("#666");var j=1500,M=200,S=0,z=.05;function F(e){var t,n=Date.now(),a=0,i=!1,o={x:0,y:0},r=function(){var e=new T.l(40,100,100);e.computeVertexNormals();var t=new T.f({wireframe:!0});return new T.e(e,t)}(),s=function(e){var t=e.geometry,n=new T.l(t.parameters.radius,t.parameters.widthSegments,t.parameters.heightSegments).vertices,a=new Float32Array(3*n.length);n.forEach(function(e,t){e.toArray(a,3*t)});var i=new T.b;i.addAttribute("position",new T.a(a,3));var o=new T.i({size:.05,map:(new T.m).load("assets/images/point.png"),alphaTest:.5,color:O,transparent:!0});return new T.h(i,o)}(r),c=new T.g(75,window.innerWidth/window.innerHeight,.1,1e3);c.position.set(0,M,0),c.lookAt(new T.n(0,0,0));var u=function(){var e=window,t=e.innerWidth,n=e.innerHeight,a=e.devicePixelRatio,i=new T.o({alpha:!0});return i.setSize(t,n),i.setPixelRatio(a),i.setClearColor(0,0),i}();e.appendChild(u.domElement);var l=new T.k;l.add(s);var d=function(){function e(){i=!0}function t(){i=!1}function n(e){var t={x:e.offsetX-o.x,y:e.offsetY-o.y};if(i){var n=(new T.j).setFromEuler(new T.d(L(.25*t.y),L(.25*t.x),0,"XYZ"));s.quaternion.multiplyQuaternions(n,s.quaternion)}o.x=e.offsetX,o.y=e.offsetY}return u.domElement.addEventListener("mousedown",e),u.domElement.addEventListener("mouseup",t),u.domElement.addEventListener("mousemove",n),function(){u.domElement.removeEventListener("mousedown",e),u.domElement.removeEventListener("mouseup",t),u.domElement.removeEventListener("mousemove",n)}}(),m=function(){function e(e){e.deltaY>0?c.position.y=Math.min(c.position.y+2,M):c.position.y=Math.max(c.position.y-2,S)}return u.domElement.addEventListener("wheel",e),function(){u.domElement.removeEventListener("wheel",e)}}();function h(){c.aspect=window.innerWidth/window.innerHeight,c.updateProjectionMatrix(),u.setSize(window.innerWidth,window.innerHeight),u.render(l,c)}return window.addEventListener("resize",h),{animate:function e(){s.rotateY(-.002),Date.now()-n>j&&s.rotateX(.002),(a+=.005)>=2*Math.PI&&(a=0),c.translateY(Math.cos(a)*z),c.translateX(Math.cos(a)*z),c.translateZ(Math.cos(a)*z*5),u.render(l,c),t=window.requestAnimationFrame(e)},stop:function(){window.cancelAnimationFrame(t),window.removeEventListener("resize",h),e.removeChild(u.domElement),d(),m(),l.remove(s)},getSphereGeometry:function(){return r.geometry},getHalpernGeometry:function(){return s.geometry}}}function L(e){return e*Math.PI/180}var I=n(17),R=n.n(I),P=(n(39),512),U=.1,B=1,N=[w(function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(o)))).rendererContainer=void 0,n.originalVertices=void 0,n.getSphereGeometry=void 0,n.getHalpernGeometry=void 0,n.onUnmount=void 0,n.focusedData=[],n.rendererRef=i.a.createRef(),n.updateVertices=function(e){if(null!=n.getSphereGeometry&&null!=n.getHalpernGeometry&&null!=n.originalVertices){n.focusedData.splice(0,10),n.focusedData=n.focusedData.concat(new Array(10).fill(e[P]));var t=n.getSphereGeometry(),a=Math.floor(e.length/t.parameters.widthSegments),i=(t.vertices.length-2)/(t.parameters.widthSegments-1);t.vertices.forEach(function(e,t){var o=Math.ceil(t/i),r=o*a,s=Math.min(o,i-o);e.copy(n.originalVertices[t]);var c=Math.abs(n.focusedData[r]-128)/255*s*U+B;e.multiplyScalar(c)}),n.getHalpernGeometry().fromGeometry(t),t.verticesNeedUpdate=!0}},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.rendererContainer=this.rendererRef.current;var e=F(this.rendererContainer),t=e.animate,n=e.stop,a=e.getSphereGeometry,i=e.getHalpernGeometry;this.onUnmount=n,this.getSphereGeometry=a,this.getHalpernGeometry=i,this.originalVertices=R()(a().vertices),this.focusedData=new Array(this.props.data.length).fill(128),t()}},{key:"componentDidUpdate",value:function(){this.updateVertices(this.props.data)}},{key:"componentWillUnmount",value:function(){this.onUnmount&&this.onUnmount()}},{key:"render",value:function(){return i.a.createElement("div",{className:"visualization halpern",ref:this.rendererRef,style:this.props.style})}}]),t}(i.a.Component),{smoothing:128}),C,k],W=500,G=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={prevIndex:null,currentIndex:0,isTransitioning:!1},n.onKeyDown=function(e){switch(e.which){case 37:case 38:n.goToPrevVisualization();break;case 39:case 40:n.goToNextVisualization()}},n.goToPrevVisualization=function(){n.state.isTransitioning||n.setState(function(e){return{prevIndex:e.currentIndex,currentIndex:e.currentIndex-1}})},n.goToNextVisualization=function(){n.state.isTransitioning||n.setState(function(e){return{prevIndex:e.currentIndex,currentIndex:e.currentIndex+1}})},n.startTransition=function(){return n.setState({isTransitioning:!0})},n.endTransition=function(){return n.setState({isTransitioning:!1})},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.onKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.onKeyDown)}},{key:"render",value:function(){var e,t,n=this.props.data,a=this.state,o=a.prevIndex,r=a.currentIndex,s=a.isTransitioning,c=null!=o&&o<r?"next":"prev",u=c?"visualization-".concat(c):void 0,l=(r%(e=N.length)+e)%e,d=N[l];return i.a.createElement(f.TransitionGroup,{component:null,childFactory:(t=u,function(e){return i.a.cloneElement(e,{classNames:t})})},i.a.createElement(f.CSSTransition,{key:l,timeout:W,classNames:u||"",onExit:this.startTransition,onExited:this.endTransition,mountOnEnter:!0,unmountOnExit:!0},i.a.createElement(d,{data:n,timeout:W,isTransitioning:s})))}}]),t}(i.a.Component),H=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={data:new Uint8Array},n.analyser=n.props.context.createAnalyser(),n.dataArray=new Uint8Array(n.analyser.frequencyBinCount),n.currentAnimationFrameId=void 0,n.tick=function(){n.analyser.getByteTimeDomainData(n.dataArray),n.setState({data:n.dataArray}),n.currentAnimationFrameId=window.requestAnimationFrame(n.tick)},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.context,n=e.source;this.analyser.fftSize=1024,this.analyser.smoothingTimeConstant=1,n.connect(this.analyser),this.analyser.connect(t.destination),this.currentAnimationFrameId=window.requestAnimationFrame(this.tick)}},{key:"componentWillUnmount",value:function(){var e=this.props.source;null!=this.currentAnimationFrameId&&window.cancelAnimationFrame(this.currentAnimationFrameId),null!=this.analyser&&this.analyser.disconnect(),e&&e.disconnect()}},{key:"render",value:function(){var e=this.state.data;return i.a.createElement(G,{data:e})}}]),t}(a.Component),V=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(o)))).state={wantsToPlay:!1,isPlaying:!1,context:void 0,source:void 0},n.audioRef=i.a.createRef(),n.audioEventListeners=[],n.lastMouseDownTimestamp=void 0,n.audioElement=void 0,n.initialize=function(){var e=n.audioRef.current;n.audioElement=e;var t=new(window.AudioContext||window.webkitAudioContext),a=t.createMediaElementSource(e);n.addAudioEventListeners([{event:"playing",listener:n.onPlay},{event:"pause",listener:n.onPause},{event:"error",listener:n.onError}]),n.setState({context:t,source:a})},n.onMouseDown=function(e){1===e.which&&(n.lastMouseDownTimestamp=Date.now())},n.onMouseUp=function(){n.lastMouseDownTimestamp&&Date.now()-n.lastMouseDownTimestamp<250&&n.onClick()},n.onClick=function(){null==n.audioElement&&n.initialize(),n.audioElement.paused?(n.setState({wantsToPlay:!0}),n.audioElement.play()):(n.setState({wantsToPlay:!1}),n.audioElement.pause())},n.onPlay=function(){return n.setState({isPlaying:!0})},n.onPause=function(){return n.setState({isPlaying:!1})},n.onError=console.error,n.addAudioEventListeners=function(e){var t=!0,a=!1,i=void 0;try{for(var o,r=e[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var s=o.value;n.audioEventListeners.push(s),n.audioElement.addEventListener(s.event,s.listener)}}catch(c){a=!0,i=c}finally{try{t||null==r.return||r.return()}finally{if(a)throw i}}},n.removeAudioEventListeners=function(){var e=!0,t=!1,a=void 0;try{for(var i,o=n.audioEventListeners[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var r=i.value;n.audioElement.removeEventListener(r.event,r.listener)}}catch(s){t=!0,a=s}finally{try{e||null==o.return||o.return()}finally{if(t)throw a}}n.audioEventListeners=[]},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("mousedown",this.onMouseDown),window.addEventListener("mouseup",this.onMouseUp)}},{key:"componentWillUnmount",value:function(){this.removeAudioEventListeners(),window.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mouseup",this.onMouseUp)}},{key:"render",value:function(){var e=this.state,t=e.wantsToPlay,n=e.isPlaying,a=e.context,o=e.source;return i.a.createElement(i.a.Fragment,null,i.a.createElement("audio",{ref:this.audioRef,id:"audioElement",src:"http://snds.blackwright.com",preload:"auto",crossOrigin:"anonymous"}),o&&a&&i.a.createElement(i.a.Fragment,null,i.a.createElement(H,{context:a,source:o}),t&&i.a.createElement(v,{show:!n})),!t&&i.a.createElement("div",{id:"play"}))}}]),t}(a.Component);n(40),n(41);r.a.render(i.a.createElement(V,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[20,1,2]]]);
//# sourceMappingURL=main.a722bae9.chunk.js.map