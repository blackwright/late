(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{15:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return r});var a=512,r=a/2},19:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return c});var a=n(2),r=n(0),o=n(9);function i(e){var t=Object(r.useState)(e),n=Object(a.a)(t,2),o=n[0],i=n[1],c=Object(r.useRef)(o);return Object(r.useEffect)(function(){c.current=o},[o]),[o,i,c]}function c(e,t){Object(r.useEffect)(function(){e();var t=Object(o.a)(e);return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}},t)}},31:function(e){e.exports={a:106}},32:function(e,t,n){e.exports=n(50)},41:function(e,t,n){},42:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(17),i=n.n(o),c=n(12);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var u,s=n(18),l=n(21);!function(e){e.BEGIN_VISUALIZATION_TRANSITION="BEGIN_VISUALIZATION_TRANSITION",e.END_VISUALIZATION_TRANSITION="END_VISUALIZATION_TRANSITION",e.GO_TO_PREV_VISUALIZATION="GO_TO_PREV_VISUALIZATION",e.GO_TO_NEXT_VISUALIZATION="GO_TO_NEXT_VISUALIZATION"}(u||(u={}));var d={currentVisualizationIndex:0,prevVisualizationIndex:0};var m=Object(s.b)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;switch((arguments.length>1?arguments[1]:void 0).type){case u.GO_TO_NEXT_VISUALIZATION:return Object(l.a)({},e,{currentVisualizationIndex:e.currentVisualizationIndex+1,prevVisualizationIndex:e.currentVisualizationIndex});case u.GO_TO_PREV_VISUALIZATION:return Object(l.a)({},e,{currentVisualizationIndex:e.currentVisualizationIndex-1,prevVisualizationIndex:e.currentVisualizationIndex});default:return e}},window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),p=n(2),f=n(29),b=n(22),v=(n(41),function(){return r.a.createElement("div",{className:"loading-visualization"},r.a.createElement("div",{className:"ring"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))}),h=[{component:r.a.lazy(function(){return n.e(5).then(n.bind(null,61))})},{component:r.a.lazy(function(){return Promise.all([n.e(0),n.e(8)]).then(n.bind(null,62))}),options:{smoothing:128}},{component:r.a.lazy(function(){return n.e(6).then(n.bind(null,64))})},{component:r.a.lazy(function(){return n.e(4).then(n.bind(null,60))}),options:{smoothing:64}},{component:r.a.lazy(function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,63))})}],w=n(9),E=h.map(function(e){return function(t){t.style;var n=Object(f.a)(t,["style"]);return r.a.createElement(b.a.div,{className:"visualization",style:t.style},r.a.createElement(e.component,Object.assign({},n,{options:e.options})))}}),O=Object(c.b)(function(e){return{currentIndex:e.currentVisualizationIndex,prevIndex:e.prevVisualizationIndex}})(function(e){var t=e.data,n=e.lowPassData,o=e.prevIndex,i=e.currentIndex,c=Object(w.b)(i,h.length),u=Object(a.useCallback)(function(e,t){var n=0;return e<t?n=1:t<e&&(n=-1),"translate3d(".concat(100*n,"%, 0, 0)")},[]),s=Object(b.d)(c,null,{from:{transform:u(i,o)},enter:{transform:u()},leave:{transform:u(o,i)},initial:{transform:u(0,-1)}});return r.a.createElement(a.Suspense,{fallback:r.a.createElement(v,null)},s.map(function(e){var a=e.item,o=e.props,i=e.key,c=E[a];return r.a.createElement(c,{key:i,data:t,lowPassData:n,style:o})}))}),g=n(15),T=function(e){var t=e.audioContext,n=e.audioSource,o=Object(a.useState)(new Uint8Array),i=Object(p.a)(o,2),c=i[0],u=i[1],s=Object(a.useState)(new Uint8Array),l=Object(p.a)(s,2),d=l[0],m=l[1],f=Object(a.useRef)();return Object(a.useEffect)(function(){if(null!=t&&null!=n){var e=t.createAnalyser();e.fftSize=g.b,e.smoothingTimeConstant=0,n.connect(e),e.connect(t.destination);var a=t.createBiquadFilter();a.type="lowpass";var r=t.createAnalyser();return r.fftSize=g.b,r.smoothingTimeConstant=0,n.connect(a),a.connect(r),f.current=window.requestAnimationFrame(function t(){var n=new Uint8Array(g.b);e.getByteTimeDomainData(n),u(n);var a=new Uint8Array(g.b);r.getByteTimeDomainData(a),m(a),f.current=window.requestAnimationFrame(t)}),function(){null!=f.current&&window.cancelAnimationFrame(f.current),e&&e.disconnect(),r&&r.disconnect(),n&&n.disconnect()}}},[t,n]),r.a.createElement(O,{data:c,lowPassData:d})},j=n(14),I=n.n(j),k=(n(42),function(e){var t=e.isShown,n=void 0===t||t;return r.a.createElement("div",{className:I()("loading-audio",{show:n})},r.a.createElement("span",{className:"loading-dot"}),r.a.createElement("span",{className:"loading-dot"}),r.a.createElement("span",{className:"loading-dot"}))}),y=n(31),N=n(25),x=n(27),z=(n(46),[{artist:"Nujabes",title:"Aruarian Dance",path:"https://blackwright-late.s3.amazonaws.com/nujabes-aruarian-dance.mp3"},{artist:"B\xd8JET",title:"Lost",path:"https://blackwright-late.s3.amazonaws.com/b%C3%B8jet-lost.mp3"},{artist:"Kudasai",title:"Dream of Her",path:"https://blackwright-late.s3.amazonaws.com/kudasai-dream-of-her.mp3"},{artist:"Wys",title:"Close My Eyes",path:"https://blackwright-late.s3.amazonaws.com/wys-close-my-eyes.mp3"},{artist:"Sky.High",title:"Cold Days (feat. j'san)",path:"https://blackwright-late.s3.amazonaws.com/sky.high-cold-days-feat-jsan.mp3"},{artist:"Kudasai",title:"The Girl I Haven't Met",path:"https://blackwright-late.s3.amazonaws.com/kudasai-the-girl.mp3"},{artist:"Fujitsu",title:"Awaiting",path:"https://blackwright-late.s3.amazonaws.com/fujitsu-awaiting.mp3"},{artist:"Nymano",title:"For You",path:"https://blackwright-late.s3.amazonaws.com/nymano-for-you.mp3"},{artist:"Kudasai",title:"Technicolor",path:"https://blackwright-late.s3.amazonaws.com/kudasai-technicolor.mp3"},{artist:"Juan Rios",title:"Noche",path:"https://blackwright-late.s3.amazonaws.com/juan-rios-noche.mp3"},{artist:"Philanthrope",title:"Carwash",path:"https://blackwright-late.s3.amazonaws.com/philanthrope-carwash.mp3"},{artist:"agxxd1ne",title:"Sunday Morning",path:"https://blackwright-late.s3.amazonaws.com/agxxd1ne-sunday-morning.mp3"},{artist:"Flamingosis",title:"Football Head",path:"https://blackwright-late.s3.amazonaws.com/flamingosis-football-head.mp3"},{artist:"Nujabes",title:"Counting Stars",path:"https://blackwright-late.s3.amazonaws.com/nujabes-counting-stars.mp3"}]),_=function(e){var t=e.onHover,n=e.onHoverStop,a=e.audioIndex,o=e.prevTrack,i=e.nextTrack,c=z[a];return r.a.createElement("div",{id:"audio-controls",onMouseEnter:t,onMouseLeave:n},c.artist.toLocaleLowerCase()," - ",c.title.toLocaleLowerCase(),r.a.createElement("div",{id:"track-controls"},r.a.createElement("button",{onTouchEnd:o,onMouseUp:o},r.a.createElement(N.a,{icon:x.a,size:"xs"})),r.a.createElement("button",{onTouchEnd:i,onMouseUp:i},r.a.createElement(N.a,{icon:x.b,size:"xs"}))))},A=(n(47),Object(c.b)(null,function(e){return{goToNextVisualization:function(){return e({type:u.GO_TO_NEXT_VISUALIZATION})},goToPrevVisualization:function(){return e({type:u.GO_TO_PREV_VISUALIZATION})}}})(function(e){var t=Object(a.useState)(!0),n=Object(p.a)(t,2),o=n[0],i=n[1],c=Object(a.useState)(!1),u=Object(p.a)(c,2),s=u[0],l=u[1],d=Object(a.useRef)(),m=Object(a.useRef)();Object(a.useEffect)(function(){var t=function(t){switch(t.which){case 37:case 38:e.goToPrevVisualization();break;case 39:case 40:e.goToNextVisualization()}};return document.addEventListener("keydown",t),function(){return document.removeEventListener("keydown",t)}},[]);var f=Object(a.useCallback)(function(){null!=d.current&&window.clearTimeout(d.current),i(!0),d.current=window.setTimeout(function(){s||i(!1)},3e3)},[s]),b=Object(a.useCallback)(function(){e.audioContext&&e.audioContext.resume(),e.togglePlay(),f()},[e.audioContext,e.togglePlay]),v=Object(a.useCallback)(function(e){e.preventDefault(),m.current={timestamp:Date.now(),x:e.touches[0].clientX}},[]),h=function(){return window.open("https://github.com/blackwright/late")},w=Object(a.useCallback)(function(e){1===e.nativeEvent.which&&(m.current={timestamp:Date.now(),x:e.clientX})},[]),E=Object(a.useCallback)(function(e){1===e.nativeEvent.which&&m.current&&Date.now()-m.current.timestamp<250&&b()},[]),O=Object(a.useCallback)(function(t){if(t.preventDefault(),m.current&&Date.now()-m.current.timestamp<250&&f(),m.current&&Date.now()-m.current.timestamp<350){var n=t.changedTouches[0].clientX-m.current.x;Math.abs(n)>50&&(n<0?e.goToPrevVisualization():e.goToNextVisualization())}},[s]),g=Object(a.useCallback)(function(t){t.preventDefault(),e.goToPrevVisualization(),f()},[s]),T=Object(a.useCallback)(function(t){t.preventDefault(),e.goToNextVisualization(),f()},[s]),j=Object(a.useCallback)(function(){return l(!0)},[]),N=Object(a.useCallback)(function(){return l(!1)},[]),x=e.wantsToPlay,z=e.isPlaying,A=e.audioIndex,S=e.prevTrack,L=e.nextTrack;return r.a.createElement(r.a.Fragment,null,x&&!z&&r.a.createElement(k,null),r.a.createElement("div",{id:"overlay",onTouchStart:v,onTouchEnd:O,onMouseMove:f,className:I()({show:o})},r.a.createElement("h1",{id:"title",onClick:h,onTouchEnd:h,onMouseEnter:j,onMouseLeave:N},"late"),r.a.createElement("div",{id:"version"},"build ",y.a),r.a.createElement("div",{id:"play-pause-container",onMouseDown:w,onMouseUp:E,onTouchEnd:b,onMouseEnter:j,onMouseLeave:N},r.a.createElement("div",{className:I()({play:!x&&!z,pause:x&&z})})),r.a.createElement("div",{className:"navigation"},r.a.createElement("div",{className:"arrow-container",onTouchEnd:g,onMouseUp:g,onMouseEnter:j,onMouseLeave:N},r.a.createElement("svg",{className:"arrow",width:"60px",height:"80px",viewBox:"0 0 50 80"},r.a.createElement("polyline",{fill:"none",stroke:"#FFF",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",points:"45.63,75.8 0.375,38.087 45.63,0.375"}))),r.a.createElement("div",{className:"arrow-container",onTouchEnd:T,onMouseUp:T,onMouseEnter:j,onMouseLeave:N},r.a.createElement("svg",{className:"arrow",width:"60px",height:"80px",viewBox:"0 0 50 80"},r.a.createElement("polyline",{fill:"none",stroke:"#FFF",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",points:"0.375,0.375 45.63,38.087 0.375,75.8"})))),r.a.createElement(_,{onHover:j,onHoverStop:N,audioIndex:A,prevTrack:S,nextTrack:L})))})),S=n(19),L=function(){var e=Object(a.useState)(!1),t=Object(p.a)(e,2),n=t[0],o=t[1],i=Object(a.useState)(!1),c=Object(p.a)(i,2),u=c[0],s=c[1],l=Object(S.b)(void 0),d=Object(p.a)(l,3),m=d[0],f=d[1],b=d[2],v=Object(a.useState)(),h=Object(p.a)(v,2),E=h[0],O=h[1],g=Object(S.b)(0),j=Object(p.a)(g,3),I=j[0],k=j[1],y=(j[2],Object(a.useRef)(null)),N=Object(a.useCallback)(function(){var e=y.current,t=Object(w.b)(I+1,z.length);e.src=z[t].path,e.play(),k(t)},[I,y.current]),x=Object(a.useCallback)(function(){var e=y.current,t=Object(w.b)(I-1,z.length),n=e.currentTime>5;e.src=z[n?I:t].path,e.play(),k(t)},[I,y.current]);Object(a.useEffect)(function(){var e=y.current,t=function(){return s(!0)},n=function(){return s(!1)},a=console.error;return e.addEventListener("playing",t),e.addEventListener("pause",n),e.addEventListener("error",a),function(){e.removeEventListener("playing",t),e.removeEventListener("pause",n),e.removeEventListener("error",a)}},[]),Object(a.useEffect)(function(){var e=y.current;return e.addEventListener("ended",N),function(){return e.removeEventListener("ended",N)}},[I,y.current]);var _=Object(a.useCallback)(function(){var e=y.current,t=new(window.AudioContext||window.webkitAudioContext),n=t.createMediaElementSource(e);f(t),O(n)},[y.current]),L=Object(a.useCallback)(function(){var e=y.current;e.paused?(o(!0),e.play(),b.current||_()):(o(!1),e.pause())},[y.current]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("audio",{ref:y,id:"audioElement",src:z[0].path,preload:"auto",crossOrigin:"anonymous"}),r.a.createElement(T,{audioContext:m,audioSource:E}),r.a.createElement(A,{audioContext:m,wantsToPlay:n,isPlaying:u,togglePlay:L,audioIndex:I,prevTrack:x,nextTrack:N}))};n(48),n(49);i.a.render(r.a.createElement(c.a,{store:m},r.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},9:function(e,t,n){"use strict";function a(e,t){return(e%t+t)%t}function r(e){return 0===a(e,1)}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(r(e)&&r(t))return e+Math.floor(Math.random()*(t-e));var a=e+Math.random()*(t-e);return Number(a.toPrecision(n))}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=null;return function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];var c=this,u=n&&null==a;null!=a&&window.clearTimeout(a),a=window.setTimeout(function(){a=null,n||e.apply(c,o)},t),u&&e.apply(c,o)}}n.d(t,"b",function(){return a}),n.d(t,"c",function(){return o}),n.d(t,"a",function(){return i})}},[[32,2,3]]]);
//# sourceMappingURL=main.2d7bbab1.chunk.js.map