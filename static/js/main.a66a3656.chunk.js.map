{"version":3,"sources":["utils/index.ts","config/index.ts","utils/hooks.ts","serviceWorker.js","components/Visualizer/Visualizations/LoadingVisualization/index.tsx","components/Visualizer/context.tsx","components/Visualizer/Visualizations/index.tsx","components/Visualizer/VisualizationSelector.tsx","components/Analyser/index.tsx","components/LoadingAudio/index.tsx","songs.ts","components/Controls/AudioControls/index.tsx","components/Controls/index.tsx","components/App/index.tsx","index.tsx"],"names":["modulo","number1","number2","isInteger","number","randomNumberBetween","min","max","decimalPrecision","arguments","length","undefined","Math","floor","random","randomFloat","Number","toPrecision","debounced","fn","msToWait","isImmediate","timeoutId","_len","args","Array","_key","context","this","shouldCallNow","window","clearTimeout","setTimeout","apply","__webpack_require__","d","__webpack_exports__","FFT_SIZE","DATA_SIZE","useStateRef","initialState","_useState","useState","_useState2","Object","C_Users_gao_Documents_Code_late_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","state","setState","stateRef","useRef","useEffect","current","useDebouncedResize","deps","debouncedFn","addEventListener","removeEventListener","Boolean","location","hostname","match","LoadingVisualization","react_default","a","createElement","className","currentVisualizationIndex","prevVisualizationIndex","VisualizationContext","createContext","visualizationContextReducer","action","type","VisualizationContextProvider","props","_useReducer","useReducer","_useReducer2","slicedToArray","dispatch","value","useMemo","Provider","assign","useVisualizationContext","_ref","useContext","_ref2","visualizationIndexState","goToPrevVisualization","goToNextVisualization","visualizations","component","React","lazy","e","then","bind","Promise","all","options","smoothing","styledVisualizations","map","vis","style","rest","objectWithoutProperties","web","div","VisualizationSelector","data","lowPassData","visIndex","direction","useCallback","prev","translateXMultiplier","concat","transitions","useTransition","from","transform","enter","leave","initial","react","fallback","Visualizations_LoadingVisualization","item","key","Visualization","Analyser","audioContext","audioSource","Uint8Array","rawData","setRawData","_useState3","_useState4","setLowPassData","animationFrameIdRef","rawAnalyser","createAnalyser","fftSize","smoothingTimeConstant","connect","destination","filter","createBiquadFilter","lowPassAnalyser","requestAnimationFrame","tick","rawDataContainer","getByteTimeDomainData","lowPassDataContainer","cancelAnimationFrame","disconnect","Visualizer_VisualizationSelector","LoadingAudio","_ref$isShown","isShown","classNames","show","songs","artist","title","path","AudioControls","onHover","onHoverStop","audioIndex","prevTrack","nextTrack","currentSong","id","onMouseEnter","onMouseLeave","toLocaleLowerCase","onTouchEnd","onMouseUp","index_es","icon","faStepBackward","size","faStepForward","Controls","isOverlayShown","setIsOverlayShown","isControlHovered","setIsControlHovered","_useVisualizationCont","timeoutRef","touchRef","onKeyDown","event","which","document","showOverlay","togglePlay","resume","onTouchStart","preventDefault","timestamp","Date","now","x","touches","clientX","goToRepo","open","onMouseDown","nativeEvent","deltaX","changedTouches","abs","onPrev","onNext","wantsToPlay","isPlaying","Fragment","components_LoadingAudio","onMouseMove","onClick","versionInfo","play","pause","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","points","Controls_AudioControls","App","setWantsToPlay","setIsPlaying","_useStateRef","_useStateRef2","setAudioContext","audioContextRef","_useState5","_useState6","setSource","_useStateRef3","_useStateRef4","setAudioIndex","audioRef","audioElement","nextAudioIndex","src","prevAudioIndex","currentTime","onAudioPlay","onAudioPause","onAudioError","console","error","initializeAudioContext","AudioContext","webkitAudioContext","createMediaElementSource","paused","ref","preload","crossOrigin","components_Analyser","components_Controls","ReactDOM","render","components_App","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.a66a3656.chunk.js","sourcesContent":["export function modulo(number1: number, number2: number): number {\r\n  return ((number1 % number2) + number2) % number2;\r\n}\r\n\r\nexport function isMobileDevice(): boolean {\r\n  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\r\n    navigator.userAgent\r\n  );\r\n}\r\n\r\nfunction isInteger(number: number) {\r\n  return modulo(number, 1) === 0;\r\n}\r\n\r\nexport function randomNumberBetween(\r\n  min: number,\r\n  max: number,\r\n  decimalPrecision = 1\r\n) {\r\n  if (isInteger(min) && isInteger(max)) {\r\n    return min + Math.floor(Math.random() * (max - min));\r\n  }\r\n\r\n  const randomFloat = min + Math.random() * (max - min);\r\n  return Number(randomFloat.toPrecision(decimalPrecision));\r\n}\r\n\r\nexport function debounced(\r\n  fn: (...args: any[]) => any,\r\n  msToWait: number = 500,\r\n  isImmediate: boolean = false\r\n) {\r\n  let timeoutId: number | null = null;\r\n\r\n  return function(this: any, ...args: any[]): any {\r\n    const context = this;\r\n\r\n    const delayedFunction = function() {\r\n      timeoutId = null;\r\n\r\n      if (!isImmediate) {\r\n        fn.apply(context, args);\r\n      }\r\n    };\r\n\r\n    const shouldCallNow = isImmediate && timeoutId == null;\r\n\r\n    if (timeoutId != null) {\r\n      window.clearTimeout(timeoutId);\r\n    }\r\n\r\n    timeoutId = window.setTimeout(delayedFunction, msToWait);\r\n\r\n    if (shouldCallNow) {\r\n      fn.apply(context, args);\r\n    }\r\n  };\r\n}\r\n","export const FFT_SIZE = 512;\r\nexport const DATA_SIZE = FFT_SIZE / 2;\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport { debounced } from '../utils';\r\n\r\nexport function useStateRef<S>(\r\n  initialState: S | (() => S)\r\n): [S, React.Dispatch<React.SetStateAction<S>>, React.MutableRefObject<S>] {\r\n  const [state, setState] = useState(initialState);\r\n  const stateRef = useRef(state);\r\n\r\n  useEffect(() => {\r\n    stateRef.current = state;\r\n  }, [state]);\r\n\r\n  return [state, setState, stateRef];\r\n}\r\n\r\nexport function useDebouncedResize(\r\n  fn: React.EffectCallback,\r\n  deps?: React.DependencyList\r\n) {\r\n  useEffect(() => {\r\n    fn();\r\n    const debouncedFn = debounced(fn);\r\n\r\n    window.addEventListener('resize', debouncedFn);\r\n    return () => window.removeEventListener('resize', debouncedFn);\r\n  }, deps);\r\n}\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\r\nimport './LoadingVisualization.scss';\r\n\r\nconst LoadingVisualization: React.FC = () => (\r\n  <div className=\"loading-visualization\">\r\n    <div className=\"ring\">\r\n      <div />\r\n      <div />\r\n      <div />\r\n      <div />\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport default LoadingVisualization;\r\n","import React, {\r\n  createContext,\r\n  useContext,\r\n  useReducer,\r\n  useMemo,\r\n  Dispatch\r\n} from 'react';\r\n\r\ntype VisualizationContextState = {\r\n  currentVisualizationIndex: number;\r\n  prevVisualizationIndex: number;\r\n};\r\n\r\ntype Action = {\r\n  type: 'INCREMENT' | 'DECREMENT';\r\n};\r\n\r\nconst initialState: VisualizationContextState = {\r\n  currentVisualizationIndex: 0,\r\n  prevVisualizationIndex: 0\r\n};\r\n\r\nconst VisualizationContext = createContext(initialState);\r\n\r\nfunction visualizationContextReducer(\r\n  state: VisualizationContextState,\r\n  action: Action\r\n) {\r\n  switch (action.type) {\r\n    case 'INCREMENT': {\r\n      return {\r\n        currentVisualizationIndex: state.currentVisualizationIndex + 1,\r\n        prevVisualizationIndex: state.currentVisualizationIndex\r\n      };\r\n    }\r\n\r\n    case 'DECREMENT': {\r\n      return {\r\n        currentVisualizationIndex: state.currentVisualizationIndex - 1,\r\n        prevVisualizationIndex: state.currentVisualizationIndex\r\n      };\r\n    }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport function VisualizationContextProvider(props: any) {\r\n  const [state, dispatch] = useReducer(\r\n    visualizationContextReducer,\r\n    initialState\r\n  );\r\n  const value = useMemo(() => [state, dispatch], [state]);\r\n  return <VisualizationContext.Provider value={value} {...props} />;\r\n}\r\n\r\nexport function useVisualizationContext() {\r\n  const [state, dispatch]: [\r\n    VisualizationContextState,\r\n    Dispatch<Action>\r\n  ] = useContext(VisualizationContext) as any;\r\n\r\n  const goToPrevVisualization = () => dispatch({ type: 'DECREMENT' });\r\n  const goToNextVisualization = () => dispatch({ type: 'INCREMENT' });\r\n\r\n  return {\r\n    visualizationIndexState: state,\r\n    goToPrevVisualization,\r\n    goToNextVisualization\r\n  };\r\n}\r\n","import React from 'react';\r\nimport Drummer from './Drummer';\r\nimport Halpern from './Halpern';\r\nimport Stars from './Stars';\r\nimport Rain from './Rain';\r\nimport { Props } from './VisualizationHOC';\r\n\r\nexport type QualitySettings = {\r\n  [quality: number]: { [setting: string]: any };\r\n};\r\n\r\nexport type Options = {\r\n  smoothing?: number;\r\n};\r\n\r\nexport type SelectableVisualization = {\r\n  component: React.ComponentType<Props>;\r\n  options?: Options;\r\n};\r\n\r\nconst visualizations: SelectableVisualization[] = [\r\n  {\r\n    component: React.lazy(() => import('./Rain'))\r\n  },\r\n  {\r\n    component: React.lazy(() => import('./Stars')),\r\n    options: { smoothing: 128 }\r\n  },\r\n  {\r\n    component: React.lazy(() => import('./Waveform'))\r\n  },\r\n  {\r\n    component: React.lazy(() => import('./Drummer')),\r\n    options: { smoothing: 64 }\r\n  },\r\n  {\r\n    component: React.lazy(() => import('./Halpern'))\r\n  }\r\n];\r\n\r\nexport default visualizations;\r\n","import React, { Suspense, useCallback } from 'react';\r\nimport { useTransition, animated } from 'react-spring';\r\nimport * as VisualizationHOC from './Visualizations/VisualizationHOC';\r\nimport LoadingVisualization from './Visualizations/LoadingVisualization';\r\nimport { useVisualizationContext } from './context';\r\nimport visualizations from './Visualizations';\r\nimport { modulo } from '../../utils';\r\n\r\ntype Props = Pick<VisualizationHOC.Props, 'data' | 'lowPassData'>;\r\n\r\ntype StyledProps = Props & {\r\n  style: React.CSSProperties;\r\n};\r\n\r\nconst styledVisualizations = visualizations.map(vis => {\r\n  return (props: StyledProps) => {\r\n    const { style, ...rest } = props;\r\n\r\n    return (\r\n      <animated.div className=\"visualization\" style={props.style}>\r\n        <vis.component {...rest} options={vis.options} />\r\n      </animated.div>\r\n    );\r\n  };\r\n});\r\n\r\nconst VisualizationSelector: React.FC<Props> = ({ data, lowPassData }) => {\r\n  const { visualizationIndexState } = useVisualizationContext();\r\n  const {\r\n    prevVisualizationIndex,\r\n    currentVisualizationIndex\r\n  } = visualizationIndexState;\r\n\r\n  const visIndex = modulo(currentVisualizationIndex, visualizations.length);\r\n\r\n  const direction = useCallback((current?, prev?) => {\r\n    let translateXMultiplier = 0;\r\n\r\n    if (current < prev) {\r\n      translateXMultiplier = 1;\r\n    } else if (prev < current) {\r\n      translateXMultiplier = -1;\r\n    }\r\n\r\n    return `translate3d(${100 * translateXMultiplier}%, 0, 0)`;\r\n  }, []);\r\n\r\n  const transitions = useTransition(visIndex, null, {\r\n    from: {\r\n      transform: direction(currentVisualizationIndex, prevVisualizationIndex)\r\n    },\r\n    enter: { transform: direction() },\r\n    leave: {\r\n      transform: direction(prevVisualizationIndex, currentVisualizationIndex)\r\n    },\r\n    initial: { transform: direction(0, -1) }\r\n  });\r\n\r\n  return (\r\n    <Suspense fallback={<LoadingVisualization />}>\r\n      {transitions.map(({ item, props, key }) => {\r\n        const Visualization = styledVisualizations[item];\r\n        return (\r\n          <Visualization\r\n            key={key}\r\n            data={data}\r\n            lowPassData={lowPassData}\r\n            style={props}\r\n          />\r\n        );\r\n      })}\r\n    </Suspense>\r\n  );\r\n};\r\n\r\nexport default VisualizationSelector;\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport VisualizationSelector from '../Visualizer/VisualizationSelector';\r\nimport { FFT_SIZE } from '../../config';\r\n\r\ntype Props = {\r\n  audioContext?: AudioContext;\r\n  audioSource?: MediaElementAudioSourceNode;\r\n};\r\n\r\nconst Analyser: React.FC<Props> = ({ audioContext, audioSource }) => {\r\n  const [rawData, setRawData] = useState(new Uint8Array());\r\n  const [lowPassData, setLowPassData] = useState(new Uint8Array());\r\n\r\n  const animationFrameIdRef = useRef<number>();\r\n\r\n  useEffect(() => {\r\n    if (audioContext == null || audioSource == null) {\r\n      return;\r\n    }\r\n\r\n    const rawAnalyser = audioContext.createAnalyser();\r\n    rawAnalyser.fftSize = FFT_SIZE;\r\n    rawAnalyser.smoothingTimeConstant = 0;\r\n    audioSource.connect(rawAnalyser);\r\n    rawAnalyser.connect(audioContext.destination);\r\n\r\n    const filter = audioContext.createBiquadFilter();\r\n    filter.type = 'lowpass';\r\n    const lowPassAnalyser = audioContext.createAnalyser();\r\n    lowPassAnalyser.fftSize = FFT_SIZE;\r\n    lowPassAnalyser.smoothingTimeConstant = 0;\r\n    audioSource.connect(filter);\r\n    filter.connect(lowPassAnalyser);\r\n\r\n    const tick = () => {\r\n      const rawDataContainer = new Uint8Array(FFT_SIZE);\r\n      rawAnalyser.getByteTimeDomainData(rawDataContainer);\r\n      setRawData(rawDataContainer);\r\n\r\n      const lowPassDataContainer = new Uint8Array(FFT_SIZE);\r\n      lowPassAnalyser.getByteTimeDomainData(lowPassDataContainer);\r\n      setLowPassData(lowPassDataContainer);\r\n\r\n      animationFrameIdRef.current = window.requestAnimationFrame(tick);\r\n    };\r\n\r\n    animationFrameIdRef.current = window.requestAnimationFrame(tick);\r\n\r\n    return () => {\r\n      animationFrameIdRef.current != null &&\r\n        window.cancelAnimationFrame(animationFrameIdRef.current);\r\n      rawAnalyser && rawAnalyser.disconnect();\r\n      lowPassAnalyser && lowPassAnalyser.disconnect();\r\n      audioSource && audioSource.disconnect();\r\n    };\r\n  }, [audioContext, audioSource]);\r\n\r\n  return <VisualizationSelector data={rawData} lowPassData={lowPassData} />;\r\n};\r\n\r\nexport default Analyser;\r\n","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport './LoadingAudio.scss';\r\n\r\ntype Props = {\r\n  isShown?: boolean;\r\n};\r\n\r\nconst LoadingAudio: React.FC<Props> = ({ isShown = true }) => (\r\n  <div className={classNames('loading-audio', { show: isShown })}>\r\n    <span className=\"loading-dot\" />\r\n    <span className=\"loading-dot\" />\r\n    <span className=\"loading-dot\" />\r\n  </div>\r\n);\r\n\r\nexport default LoadingAudio;\r\n","type Song = {\r\n  artist: string;\r\n  title: string;\r\n  path: string;\r\n};\r\n\r\nexport const songs: Song[] = [\r\n  {\r\n    artist: 'Nujabes',\r\n    title: 'Aruarian Dance',\r\n    path: 'https://blackwright-late.s3.amazonaws.com/nujabes-aruarian-dance.mp3'\r\n  },\r\n  {\r\n    artist: 'BÃ˜JET',\r\n    title: 'Lost',\r\n    path: 'https://blackwright-late.s3.amazonaws.com/b%C3%B8jet-lost.mp3'\r\n  },\r\n  {\r\n    artist: 'Kudasai',\r\n    title: 'Dream of Her',\r\n    path: 'https://blackwright-late.s3.amazonaws.com/kudasai-dream-of-her.mp3'\r\n  },\r\n  {\r\n    artist: 'Wys',\r\n    title: 'Close My Eyes',\r\n    path: 'https://blackwright-late.s3.amazonaws.com/wys-close-my-eyes.mp3'\r\n  },\r\n  {\r\n    artist: 'Sky.High',\r\n    title: `Cold Days (feat. j'san)`,\r\n    path:\r\n      'https://blackwright-late.s3.amazonaws.com/sky.high-cold-days-feat-jsan.mp3'\r\n  },\r\n  {\r\n    artist: 'Kudasai',\r\n    title: `The Girl I Haven't Met`,\r\n    path: 'https://blackwright-late.s3.amazonaws.com/kudasai-the-girl.mp3'\r\n  },\r\n  {\r\n    artist: 'Fujitsu',\r\n    title: 'Awaiting',\r\n    path: 'https://blackwright-late.s3.amazonaws.com/fujitsu-awaiting.mp3'\r\n  },\r\n  {\r\n    artist: 'Nymano',\r\n    title: 'For You',\r\n    path: 'https://blackwright-late.s3.amazonaws.com/nymano-for-you.mp3'\r\n  },\r\n  {\r\n    artist: 'Kudasai',\r\n    title: 'Technicolor',\r\n    path: 'https://blackwright-late.s3.amazonaws.com/kudasai-technicolor.mp3'\r\n  },\r\n  {\r\n    artist: 'Juan Rios',\r\n    title: 'Noche',\r\n    path: 'https://blackwright-late.s3.amazonaws.com/juan-rios-noche.mp3'\r\n  },\r\n  {\r\n    artist: 'Philanthrope',\r\n    title: 'Carwash',\r\n    path: 'https://blackwright-late.s3.amazonaws.com/philanthrope-carwash.mp3'\r\n  },\r\n  {\r\n    artist: 'agxxd1ne',\r\n    title: 'Sunday Morning',\r\n    path:\r\n      'https://blackwright-late.s3.amazonaws.com/agxxd1ne-sunday-morning.mp3'\r\n  },\r\n  {\r\n    artist: 'Flamingosis',\r\n    title: 'Football Head',\r\n    path:\r\n      'https://blackwright-late.s3.amazonaws.com/flamingosis-football-head.mp3'\r\n  },\r\n  {\r\n    artist: 'Nujabes',\r\n    title: 'Counting Stars',\r\n    path: 'https://blackwright-late.s3.amazonaws.com/nujabes-counting-stars.mp3'\r\n  }\r\n];\r\n","import React from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport {\r\n  faStepBackward,\r\n  faStepForward\r\n} from '@fortawesome/free-solid-svg-icons';\r\nimport './AudioControls.scss';\r\nimport { songs } from '../../../songs';\r\n\r\ntype Props = {\r\n  onHover: () => void;\r\n  onHoverStop: () => void;\r\n  audioIndex: number;\r\n  prevTrack: () => void;\r\n  nextTrack: () => void;\r\n};\r\n\r\nconst AudioControls: React.FC<Props> = ({\r\n  onHover,\r\n  onHoverStop,\r\n  audioIndex,\r\n  prevTrack,\r\n  nextTrack\r\n}) => {\r\n  const currentSong = songs[audioIndex];\r\n\r\n  return (\r\n    <div id=\"audio-controls\" onMouseEnter={onHover} onMouseLeave={onHoverStop}>\r\n      {currentSong.artist.toLocaleLowerCase()}\r\n      {' - '}\r\n      {currentSong.title.toLocaleLowerCase()}\r\n      <div id=\"track-controls\">\r\n        <button onTouchEnd={prevTrack} onMouseUp={prevTrack}>\r\n          <FontAwesomeIcon icon={faStepBackward} size=\"xs\" />\r\n        </button>\r\n        <button onTouchEnd={nextTrack} onMouseUp={nextTrack}>\r\n          <FontAwesomeIcon icon={faStepForward} size=\"xs\" />\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AudioControls;\r\n","import React, { useState, useEffect, useCallback, useRef } from 'react';\r\nimport classNames from 'classnames';\r\nimport LoadingAudio from '../LoadingAudio';\r\nimport AudioControls from './AudioControls';\r\nimport { useVisualizationContext } from '../Visualizer/context';\r\nimport * as versionInfo from '../../metadata/build-version.json';\r\nimport './Controls.scss';\r\n\r\nconst CONTROLS_FADE_OUT_DELAY = 3000;\r\nconst TOUCH_WAS_CLICK_THRESHOLD = 250;\r\nconst TOUCH_WAS_SWIPE_THRESHOLD = 350;\r\n\r\ntype Props = {\r\n  audioContext?: AudioContext;\r\n  wantsToPlay: boolean;\r\n  isPlaying: boolean;\r\n  togglePlay: () => void;\r\n  audioIndex: number;\r\n  prevTrack: () => void;\r\n  nextTrack: () => void;\r\n};\r\n\r\ntype Touch = {\r\n  timestamp: number;\r\n  x: number;\r\n};\r\n\r\nconst Controls: React.FC<Props> = props => {\r\n  const [isOverlayShown, setIsOverlayShown] = useState(true);\r\n  const [isControlHovered, setIsControlHovered] = useState(false);\r\n  const {\r\n    goToPrevVisualization,\r\n    goToNextVisualization\r\n  } = useVisualizationContext();\r\n\r\n  const timeoutRef = useRef<number>();\r\n  const touchRef = useRef<Touch>();\r\n\r\n  useEffect(() => {\r\n    const onKeyDown = (event: KeyboardEvent) => {\r\n      switch (event.which) {\r\n        case 37:\r\n        case 38: {\r\n          goToPrevVisualization();\r\n          break;\r\n        }\r\n        case 39:\r\n        case 40: {\r\n          goToNextVisualization();\r\n          break;\r\n        }\r\n      }\r\n    };\r\n\r\n    document.addEventListener('keydown', onKeyDown);\r\n    return () => document.removeEventListener('keydown', onKeyDown);\r\n  }, []);\r\n\r\n  const showOverlay = useCallback(() => {\r\n    timeoutRef.current != null && window.clearTimeout(timeoutRef.current);\r\n\r\n    setIsOverlayShown(true);\r\n    timeoutRef.current = window.setTimeout(() => {\r\n      if (!isControlHovered) {\r\n        setIsOverlayShown(false);\r\n      }\r\n    }, CONTROLS_FADE_OUT_DELAY);\r\n  }, [isControlHovered]);\r\n\r\n  const togglePlay = useCallback(() => {\r\n    props.audioContext && props.audioContext.resume();\r\n    props.togglePlay();\r\n    showOverlay();\r\n  }, [props.audioContext, props.togglePlay]);\r\n\r\n  const onTouchStart = useCallback((event: React.TouchEvent) => {\r\n    event.preventDefault();\r\n    touchRef.current = { timestamp: Date.now(), x: event.touches[0].clientX };\r\n  }, []);\r\n\r\n  const goToRepo = () => window.open('https://github.com/blackwright/late');\r\n\r\n  const onMouseDown = useCallback((event: React.MouseEvent) => {\r\n    if (event.nativeEvent.which === 1) {\r\n      touchRef.current = { timestamp: Date.now(), x: event.clientX };\r\n    }\r\n  }, []);\r\n\r\n  const onMouseUp = useCallback((event: React.MouseEvent) => {\r\n    if (\r\n      event.nativeEvent.which === 1 &&\r\n      touchRef.current &&\r\n      Date.now() - touchRef.current.timestamp < TOUCH_WAS_CLICK_THRESHOLD\r\n    ) {\r\n      togglePlay();\r\n    }\r\n  }, []);\r\n\r\n  const onTouchEnd = useCallback(\r\n    (event: React.TouchEvent) => {\r\n      event.preventDefault();\r\n      if (\r\n        touchRef.current &&\r\n        Date.now() - touchRef.current.timestamp < TOUCH_WAS_CLICK_THRESHOLD\r\n      ) {\r\n        showOverlay();\r\n      }\r\n\r\n      if (\r\n        touchRef.current &&\r\n        Date.now() - touchRef.current.timestamp < TOUCH_WAS_SWIPE_THRESHOLD\r\n      ) {\r\n        const deltaX = event.changedTouches[0].clientX - touchRef.current.x;\r\n        if (Math.abs(deltaX) > 50) {\r\n          if (deltaX < 0) {\r\n            goToPrevVisualization();\r\n          } else {\r\n            goToNextVisualization();\r\n          }\r\n        }\r\n      }\r\n    },\r\n    [isControlHovered]\r\n  );\r\n\r\n  const onPrev = useCallback(\r\n    (event: React.MouseEvent | React.TouchEvent) => {\r\n      event.preventDefault();\r\n      goToPrevVisualization();\r\n      showOverlay();\r\n    },\r\n    [isControlHovered]\r\n  );\r\n\r\n  const onNext = useCallback(\r\n    (event: React.MouseEvent | React.TouchEvent) => {\r\n      event.preventDefault();\r\n      goToNextVisualization();\r\n      showOverlay();\r\n    },\r\n    [isControlHovered]\r\n  );\r\n\r\n  const onHover = useCallback(() => setIsControlHovered(true), []);\r\n\r\n  const onHoverStop = useCallback(() => setIsControlHovered(false), []);\r\n\r\n  const { wantsToPlay, isPlaying, audioIndex, prevTrack, nextTrack } = props;\r\n\r\n  return (\r\n    <>\r\n      {wantsToPlay && !isPlaying && <LoadingAudio />}\r\n      <div\r\n        id=\"overlay\"\r\n        onTouchStart={onTouchStart}\r\n        onTouchEnd={onTouchEnd}\r\n        onMouseMove={showOverlay}\r\n        className={classNames({ show: isOverlayShown })}\r\n      >\r\n        <h1\r\n          id=\"title\"\r\n          onClick={goToRepo}\r\n          onTouchEnd={goToRepo}\r\n          onMouseEnter={onHover}\r\n          onMouseLeave={onHoverStop}\r\n        >\r\n          late\r\n        </h1>\r\n        <div id=\"version\">build {versionInfo.version}</div>\r\n        <div\r\n          id=\"play-pause-container\"\r\n          onMouseDown={onMouseDown}\r\n          onMouseUp={onMouseUp}\r\n          onTouchEnd={togglePlay}\r\n          onMouseEnter={onHover}\r\n          onMouseLeave={onHoverStop}\r\n        >\r\n          <div\r\n            className={classNames({\r\n              play: !wantsToPlay && !isPlaying,\r\n              pause: wantsToPlay && isPlaying\r\n            })}\r\n          />\r\n        </div>\r\n        <div className=\"navigation\">\r\n          <div\r\n            className=\"arrow-container\"\r\n            onTouchEnd={onPrev}\r\n            onMouseUp={onPrev}\r\n            onMouseEnter={onHover}\r\n            onMouseLeave={onHoverStop}\r\n          >\r\n            <svg\r\n              className=\"arrow\"\r\n              width=\"60px\"\r\n              height=\"80px\"\r\n              viewBox=\"0 0 50 80\"\r\n            >\r\n              <polyline\r\n                fill=\"none\"\r\n                stroke=\"#FFF\"\r\n                strokeWidth=\"3\"\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n                points=\"45.63,75.8 0.375,38.087 45.63,0.375\"\r\n              />\r\n            </svg>\r\n          </div>\r\n          <div\r\n            className=\"arrow-container\"\r\n            onTouchEnd={onNext}\r\n            onMouseUp={onNext}\r\n            onMouseEnter={onHover}\r\n            onMouseLeave={onHoverStop}\r\n          >\r\n            <svg\r\n              className=\"arrow\"\r\n              width=\"60px\"\r\n              height=\"80px\"\r\n              viewBox=\"0 0 50 80\"\r\n            >\r\n              <polyline\r\n                fill=\"none\"\r\n                stroke=\"#FFF\"\r\n                strokeWidth=\"3\"\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n                points=\"0.375,0.375 45.63,38.087 0.375,75.8\"\r\n              />\r\n            </svg>\r\n          </div>\r\n        </div>\r\n        <AudioControls\r\n          onHover={onHover}\r\n          onHoverStop={onHoverStop}\r\n          audioIndex={audioIndex}\r\n          prevTrack={prevTrack}\r\n          nextTrack={nextTrack}\r\n        />\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Controls;\r\n","import React, { useState, useRef, useEffect, useCallback } from 'react';\r\nimport Analyser from '../Analyser';\r\nimport Controls from '../Controls';\r\nimport { VisualizationContextProvider } from '../Visualizer/context';\r\nimport { useStateRef } from '../../utils/hooks';\r\nimport { modulo } from '../../utils';\r\nimport { songs } from '../../songs';\r\n\r\nconst App: React.FC = () => {\r\n  const [wantsToPlay, setWantsToPlay] = useState(false);\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [audioContext, setAudioContext, audioContextRef] = useStateRef<\r\n    AudioContext | undefined\r\n  >(undefined);\r\n  const [audioSource, setSource] = useState<MediaElementAudioSourceNode>();\r\n  const [audioIndex, setAudioIndex, audioIndexRef] = useStateRef(0);\r\n\r\n  const audioRef = useRef<HTMLAudioElement>(null);\r\n\r\n  const nextTrack = useCallback(() => {\r\n    const audioElement = audioRef.current!;\r\n    const nextAudioIndex = modulo(audioIndex + 1, songs.length);\r\n    audioElement.src = songs[nextAudioIndex].path;\r\n    audioElement.play();\r\n    setAudioIndex(nextAudioIndex);\r\n  }, [audioIndex, audioRef.current]);\r\n\r\n  const prevTrack = useCallback(() => {\r\n    const audioElement = audioRef.current!;\r\n    // play track from beginning if enough time has elapsed,\r\n    // instead of changing to previous track\r\n    const shouldStayOnThisTrack = audioElement.currentTime > 5;\r\n    const prevAudioIndex = shouldStayOnThisTrack\r\n      ? audioIndex\r\n      : modulo(audioIndex - 1, songs.length);\r\n    audioElement.src = songs[prevAudioIndex].path;\r\n    audioElement.play();\r\n    setAudioIndex(prevAudioIndex);\r\n  }, [audioIndex, audioRef.current]);\r\n\r\n  // attach audio event listeners\r\n  useEffect(() => {\r\n    const audioElement = audioRef.current!;\r\n\r\n    const onAudioPlay = () => setIsPlaying(true);\r\n    const onAudioPause = () => setIsPlaying(false);\r\n    const onAudioError = console.error;\r\n\r\n    audioElement.addEventListener('playing', onAudioPlay);\r\n    audioElement.addEventListener('pause', onAudioPause);\r\n    audioElement.addEventListener('error', onAudioError);\r\n\r\n    return () => {\r\n      audioElement.removeEventListener('playing', onAudioPlay);\r\n      audioElement.removeEventListener('pause', onAudioPause);\r\n      audioElement.removeEventListener('error', onAudioError);\r\n    };\r\n  }, []);\r\n\r\n  // next track listener on track end\r\n  useEffect(() => {\r\n    const audioElement = audioRef.current!;\r\n\r\n    audioElement.addEventListener('ended', nextTrack);\r\n    return () => audioElement.removeEventListener('ended', nextTrack);\r\n  }, [audioIndex, audioRef.current]);\r\n\r\n  const initializeAudioContext = useCallback(() => {\r\n    const audioElement = audioRef.current!;\r\n    const audioContext = new (window.AudioContext ||\r\n      (window as any).webkitAudioContext)();\r\n    const audioSource = audioContext.createMediaElementSource(audioElement);\r\n\r\n    setAudioContext(audioContext);\r\n    setSource(audioSource);\r\n  }, [audioRef.current]);\r\n\r\n  const togglePlay = useCallback(() => {\r\n    const audioElement = audioRef.current!;\r\n\r\n    if (audioElement.paused) {\r\n      setWantsToPlay(true);\r\n      audioElement.play();\r\n\r\n      if (!audioContextRef.current) {\r\n        initializeAudioContext();\r\n      }\r\n    } else {\r\n      setWantsToPlay(false);\r\n      audioElement.pause();\r\n    }\r\n  }, [audioRef.current]);\r\n\r\n  return (\r\n    <>\r\n      <audio\r\n        ref={audioRef}\r\n        id=\"audioElement\"\r\n        src={songs[0].path}\r\n        preload=\"auto\"\r\n        crossOrigin=\"anonymous\"\r\n      />\r\n\r\n      <VisualizationContextProvider>\r\n        <Analyser audioContext={audioContext} audioSource={audioSource} />\r\n\r\n        <Controls\r\n          audioContext={audioContext}\r\n          wantsToPlay={wantsToPlay}\r\n          isPlaying={isPlaying}\r\n          togglePlay={togglePlay}\r\n          audioIndex={audioIndex}\r\n          prevTrack={prevTrack}\r\n          nextTrack={nextTrack}\r\n        />\r\n      </VisualizationContextProvider>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport App from './components/App';\r\nimport './reset.scss';\r\nimport './index.scss';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}